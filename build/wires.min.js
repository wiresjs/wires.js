!function(){function a(){return"function"==typeof require&&"object"==typeof exports&&"object"==typeof module&&"string"==typeof __filename&&"string"==typeof __dirname}function b(a,b){this._options=b?b:{},void 0==this._options.includeLocation&&(this._options.includeLocation=!1),this.validateHandler(a),this._handler=a,this.reset()}function c(a){c.super_.call(this,a,{ignoreWhitespace:!0,verbose:!1,enforceEmptyTags:!1})}function d(a,b){this.reset(),this._options=b?b:{},void 0==this._options.ignoreWhitespace&&(this._options.ignoreWhitespace=!1),void 0==this._options.verbose&&(this._options.verbose=!0),void 0==this._options.enforceEmptyTags&&(this._options.enforceEmptyTags=!0),"function"==typeof a&&(this._callback=a)}function e(a,b){var c=function(){};c.prototype=b.prototype,a.super_=b,a.prototype=new c,a.prototype.constructor=a}if(!a()){if(this.Tautologistics){if(this.Tautologistics.NodeHtmlParser)return}else this.Tautologistics={};this.Tautologistics.NodeHtmlParser={},exports=this.Tautologistics.NodeHtmlParser}var f={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag"};b._reTrim=/(^\s+|\s+$)/g,b._reTrimComment=/(^\!--|--$)/g,b._reWhitespace=/\s/g,b._reTagName=/^\s*(\/?)\s*([^\s\/]+)/,b._reAttrib=/([^=<>\"\'\s]+)\s*=\s*"([^"]*)"|([^=<>\"\'\s]+)\s*=\s*'([^']*)'|([^=<>\"\'\s]+)\s*=\s*([^'"\s]+)|([^=<>\"\'\s\/]+)/g,b._reTags=/[\<\>]/g,b.prototype.parseComplete=function(a){this.reset(),this.parseChunk(a),this.done()},b.prototype.parseChunk=function(a){this._done&&this.handleError(new Error("Attempted to parse chunk after parsing already done")),this._buffer+=a,this.parseTags()},b.prototype.done=function(){if(!this._done){if(this._done=!0,this._buffer.length){var a=this._buffer;this._buffer="";var c={raw:a,data:this._parseState==f.Text?a:a.replace(b._reTrim,""),type:this._parseState};(this._parseState==f.Tag||this._parseState==f.Script||this._parseState==f.Style)&&(c.name=this.parseTagName(c.data)),this.parseAttribs(c),this._elements.push(c)}this.writeHandler(),this._handler.done()}},b.prototype.reset=function(){this._buffer="",this._done=!1,this._elements=[],this._elementsCurrent=0,this._current=0,this._next=0,this._location={row:0,col:0,charOffset:0,inBuffer:0},this._parseState=f.Text,this._prevTagSep="",this._tagStack=[],this._handler.reset()},b.prototype._options=null,b.prototype._handler=null,b.prototype._buffer=null,b.prototype._done=!1,b.prototype._elements=null,b.prototype._elementsCurrent=0,b.prototype._current=0,b.prototype._next=0,b.prototype._location=null,b.prototype._parseState=f.Text,b.prototype._prevTagSep="",b.prototype._tagStack=null,b.prototype.parseTagAttribs=function(a){for(var b=a.length,c=0;b>c;){var d=a[c++];(d.type==f.Tag||d.type==f.Script||d.type==f.style)&&this.parseAttribs(d)}return a},b.prototype.parseAttribs=function(a){if(a.type==f.Script||a.type==f.Style||a.type==f.Tag){var c=a.data.split(b._reWhitespace,1)[0],d=a.data.substring(c.length);if(!(d.length<1)){var e;for(b._reAttrib.lastIndex=0;e=b._reAttrib.exec(d);)void 0==a.attribs&&(a.attribs={}),"string"==typeof e[1]&&e[1].length?a.attribs[e[1]]=e[2]:"string"==typeof e[3]&&e[3].length?a.attribs[e[3].toString()]=e[4].toString():"string"==typeof e[5]&&e[5].length?a.attribs[e[5]]=e[6]:"string"==typeof e[7]&&e[7].length&&(a.attribs[e[7]]=e[7])}}},b.prototype.parseTagName=function(a){if(null==a||""==a)return"";var c=b._reTagName.exec(a);return c?(c[1]?"/":"")+c[2]:""},b.prototype.parseTags=function(){for(var a=this._buffer.length-1;b._reTags.test(this._buffer);){this._next=b._reTags.lastIndex-1;var c=this._buffer.charAt(this._next),d=this._buffer.substring(this._current,this._next),e={raw:d,data:this._parseState==f.Text?d:d.replace(b._reTrim,""),type:this._parseState},g=this.parseTagName(e.data);if(this._tagStack.length)if(this._tagStack[this._tagStack.length-1]==f.Script){if("/script"==g.toLowerCase())this._tagStack.pop();else if(0!=e.raw.indexOf("!--")&&(e.type=f.Text,this._elements.length&&this._elements[this._elements.length-1].type==f.Text)){var h=this._elements[this._elements.length-1];h.raw=h.data=h.raw+this._prevTagSep+e.raw,e.raw=e.data=""}}else if(this._tagStack[this._tagStack.length-1]==f.Style){if("/style"==g.toLowerCase())this._tagStack.pop();else if(0!=e.raw.indexOf("!--"))if(e.type=f.Text,this._elements.length&&this._elements[this._elements.length-1].type==f.Text){var h=this._elements[this._elements.length-1];""!=e.raw?(h.raw=h.data=h.raw+this._prevTagSep+e.raw,e.raw=e.data=""):h.raw=h.data=h.raw+this._prevTagSep}else""!=e.raw&&(e.raw=e.data=e.raw)}else if(this._tagStack[this._tagStack.length-1]==f.Comment){var i=e.raw.length;if("-"==e.raw.charAt(i-2)&&"-"==e.raw.charAt(i-1)&&">"==c)if(this._tagStack.pop(),this._elements.length&&this._elements[this._elements.length-1].type==f.Comment){var h=this._elements[this._elements.length-1];h.raw=h.data=(h.raw+e.raw).replace(b._reTrimComment,""),e.raw=e.data="",e.type=f.Text}else e.type=f.Comment;else if(e.type=f.Comment,this._elements.length&&this._elements[this._elements.length-1].type==f.Comment){var h=this._elements[this._elements.length-1];h.raw=h.data=h.raw+e.raw+c,e.raw=e.data="",e.type=f.Text}else e.raw=e.data=e.raw+c}if(e.type==f.Tag){e.name=g;var j=g.toLowerCase();if(0==e.raw.indexOf("!--")){e.type=f.Comment,delete e.name;var i=e.raw.length;"-"==e.raw.charAt(i-1)&&"-"==e.raw.charAt(i-2)&&">"==c?e.raw=e.data=e.raw.replace(b._reTrimComment,""):(e.raw+=c,this._tagStack.push(f.Comment))}else 0==e.raw.indexOf("!")||0==e.raw.indexOf("?")?e.type=f.Directive:"script"==j?(e.type=f.Script,"/"!=e.data.charAt(e.data.length-1)&&this._tagStack.push(f.Script)):"/script"==j?e.type=f.Script:"style"==j?(e.type=f.Style,"/"!=e.data.charAt(e.data.length-1)&&this._tagStack.push(f.Style)):"/style"==j&&(e.type=f.Style);e.name&&"/"==e.name.charAt(0)&&(e.data=e.name)}(""!=e.raw||e.type!=f.Text)&&(this._options.includeLocation&&!e.location&&(e.location=this.getLocation(e.type==f.Tag)),this.parseAttribs(e),this._elements.push(e),e.type!=f.Text&&e.type!=f.Comment&&e.type!=f.Directive&&"/"==e.data.charAt(e.data.length-1)&&this._elements.push({raw:"/"+e.name,data:"/"+e.name,name:"/"+e.name,type:e.type})),this._parseState="<"==c?f.Tag:f.Text,this._current=this._next+1,this._prevTagSep=c}this._options.includeLocation&&(this.getLocation(),this._location.row+=this._location.inBuffer,this._location.inBuffer=0,this._location.charOffset=0),this._buffer=this._current<=a?this._buffer.substring(this._current):"",this._current=0,this.writeHandler()},b.prototype.getLocation=function(a){for(var b,c=this._location,d=this._current-(a?1:0),e=a&&0==c.charOffset&&0==this._current;c.charOffset<d;c.charOffset++)b=this._buffer.charAt(c.charOffset),"\n"==b?(c.inBuffer++,c.col=0):"\r"!=b&&c.col++;return{line:c.row+c.inBuffer+1,col:c.col+(e?0:1)}},b.prototype.validateHandler=function(a){if("object"!=typeof a)throw new Error("Handler is not an object");if("function"!=typeof a.reset)throw new Error("Handler method 'reset' is invalid");if("function"!=typeof a.done)throw new Error("Handler method 'done' is invalid");if("function"!=typeof a.writeTag)throw new Error("Handler method 'writeTag' is invalid");if("function"!=typeof a.writeText)throw new Error("Handler method 'writeText' is invalid");if("function"!=typeof a.writeComment)throw new Error("Handler method 'writeComment' is invalid");if("function"!=typeof a.writeDirective)throw new Error("Handler method 'writeDirective' is invalid")},b.prototype.writeHandler=function(a){if(a=!!a,!this._tagStack.length||a)for(;this._elements.length;){var b=this._elements.shift();switch(b.type){case f.Comment:this._handler.writeComment(b);break;case f.Directive:this._handler.writeDirective(b);break;case f.Text:this._handler.writeText(b);break;default:this._handler.writeTag(b)}}},b.prototype.handleError=function(a){if("function"!=typeof this._handler.error)throw a;this._handler.error(a)},e(c,d),c.prototype.done=function(){var a,b={},d=g.getElementsByTagName(function(a){return"rss"==a||"feed"==a},this.dom,!1);if(d.length&&(a=d[0]),a){if("rss"==a.name){b.type="rss",a=a.children[0],b.id="";try{b.title=g.getElementsByTagName("title",a.children,!1)[0].children[0].data}catch(e){}try{b.link=g.getElementsByTagName("link",a.children,!1)[0].children[0].data}catch(e){}try{b.description=g.getElementsByTagName("description",a.children,!1)[0].children[0].data}catch(e){}try{b.updated=new Date(g.getElementsByTagName("lastBuildDate",a.children,!1)[0].children[0].data)}catch(e){}try{b.author=g.getElementsByTagName("managingEditor",a.children,!1)[0].children[0].data}catch(e){}b.items=[],g.getElementsByTagName("item",a.children).forEach(function(a,c,d){var e={};try{e.id=g.getElementsByTagName("guid",a.children,!1)[0].children[0].data}catch(f){}try{e.title=g.getElementsByTagName("title",a.children,!1)[0].children[0].data}catch(f){}try{e.link=g.getElementsByTagName("link",a.children,!1)[0].children[0].data}catch(f){}try{e.description=g.getElementsByTagName("description",a.children,!1)[0].children[0].data}catch(f){}try{e.pubDate=new Date(g.getElementsByTagName("pubDate",a.children,!1)[0].children[0].data)}catch(f){}b.items.push(e)})}else{b.type="atom";try{b.id=g.getElementsByTagName("id",a.children,!1)[0].children[0].data}catch(e){}try{b.title=g.getElementsByTagName("title",a.children,!1)[0].children[0].data}catch(e){}try{b.link=g.getElementsByTagName("link",a.children,!1)[0].attribs.href}catch(e){}try{b.description=g.getElementsByTagName("subtitle",a.children,!1)[0].children[0].data}catch(e){}try{b.updated=new Date(g.getElementsByTagName("updated",a.children,!1)[0].children[0].data)}catch(e){}try{b.author=g.getElementsByTagName("email",a.children,!0)[0].children[0].data}catch(e){}b.items=[],g.getElementsByTagName("entry",a.children).forEach(function(a,c,d){var e={};try{e.id=g.getElementsByTagName("id",a.children,!1)[0].children[0].data}catch(f){}try{e.title=g.getElementsByTagName("title",a.children,!1)[0].children[0].data}catch(f){}try{e.link=g.getElementsByTagName("link",a.children,!1)[0].attribs.href}catch(f){}try{e.description=g.getElementsByTagName("summary",a.children,!1)[0].children[0].data}catch(f){}try{e.pubDate=new Date(g.getElementsByTagName("updated",a.children,!1)[0].children[0].data)}catch(f){}b.items.push(e)})}this.dom=b}c.super_.prototype.done.call(this)},d._emptyTags={area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,isindex:1,link:1,meta:1,param:1,embed:1},d.reWhitespace=/^\s*$/,d.prototype.dom=null,d.prototype.reset=function(){this.dom=[],this._done=!1,this._tagStack=[],this._tagStack.last=function(){return this.length?this[this.length-1]:null}},d.prototype.done=function(){this._done=!0,this.handleCallback(null)},d.prototype.writeTag=function(a){this.handleElement(a)},d.prototype.writeText=function(a){this._options.ignoreWhitespace&&d.reWhitespace.test(a.data)||this.handleElement(a)},d.prototype.writeComment=function(a){this.handleElement(a)},d.prototype.writeDirective=function(a){this.handleElement(a)},d.prototype.error=function(a){this.handleCallback(a)},d.prototype._options=null,d.prototype._callback=null,d.prototype._done=!1,d.prototype._tagStack=null,d.prototype.handleCallback=function(a){if("function"==typeof this._callback)this._callback(a,this.dom);else if(a)throw a},d.prototype.isEmptyTag=function(a){var b=a.name.toLowerCase();return"/"==b.charAt(0)&&(b=b.substring(1)),this._options.enforceEmptyTags&&!!d._emptyTags[b]},d.prototype.handleElement=function(a){if(this._done&&this.handleCallback(new Error("Writing to the handler after done() called is not allowed without a reset()")),this._options.verbose||(delete a.raw,("tag"==a.type||"script"==a.type||"style"==a.type)&&delete a.data),this._tagStack.last())if(a.type!=f.Text&&a.type!=f.Comment&&a.type!=f.Directive)if("/"==a.name.charAt(0)){var b=a.name.substring(1);if(!this.isEmptyTag(a)){for(var c=this._tagStack.length-1;c>-1&&this._tagStack[c--].name!=b;);if(c>-1||this._tagStack[0].name==b)for(;c<this._tagStack.length-1;)this._tagStack.pop()}}else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(a),this.isEmptyTag(a)||this._tagStack.push(a);else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(a);else a.type!=f.Text&&a.type!=f.Comment&&a.type!=f.Directive?"/"!=a.name.charAt(0)&&(this.dom.push(a),this.isEmptyTag(a)||this._tagStack.push(a)):this.dom.push(a)};var g={testElement:function(a,b){if(!b)return!1;for(var c in a)if("tag_name"==c){if("tag"!=b.type&&"script"!=b.type&&"style"!=b.type)return!1;if(!a.tag_name(b.name))return!1}else if("tag_type"==c){if(!a.tag_type(b.type))return!1}else if("tag_contains"==c){if("text"!=b.type&&"comment"!=b.type&&"directive"!=b.type)return!1;if(!a.tag_contains(b.data))return!1}else if(!b.attribs||!a[c](b.attribs[c]))return!1;return!0},getElements:function(a,b,c,d){function e(a){return function(b){return b==a}}if(c=void 0===c||null===c||!!c,d=isNaN(parseInt(d))?-1:parseInt(d),!b)return[];var f,h=[];for(var i in a)"function"!=typeof a[i]&&(a[i]=e(a[i]));if(g.testElement(a,b)&&h.push(b),d>=0&&h.length>=d)return h;if(c&&b.children)f=b.children;else{if(!(b instanceof Array))return h;f=b}for(var j=0;j<f.length&&(h=h.concat(g.getElements(a,f[j],c,d)),!(d>=0&&h.length>=d));j++);return h},getElementById:function(a,b,c){var d=g.getElements({id:a},b,c,1);return d.length?d[0]:null},getElementsByTagName:function(a,b,c,d){return g.getElements({tag_name:a},b,c,d)},getElementsByTagType:function(a,b,c,d){return g.getElements({tag_type:a},b,c,d)}};exports.Parser=b,exports.DefaultHandler=d,exports.RssHandler=c,exports.ElementType=f,exports.DomUtils=g}();var isarray=_.isArray;!function(){function a(a){for(var b,d=[],e=0,f=0,g="";null!=(b=k.exec(a));){var h=b[0],i=b[1],j=b.index;if(g+=a.slice(f,j),f=j+h.length,i)g+=i[1];else{g&&(d.push(g),g="");var l=b[2],m=b[3],n=b[4],o=b[5],p=b[6],q=b[7],r="+"===p||"*"===p,s="?"===p||"*"===p,t=l||"/",u=n||o||(q?".*":"[^"+t+"]+?");d.push({name:m||e++,prefix:l||"",delimiter:t,optional:s,repeat:r,pattern:c(u)})}}return f<a.length&&(g+=a.substr(f)),g&&d.push(g),d}function b(a){return a.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function c(a){return a.replace(/([=!:$\/()])/g,"\\$1")}function d(a,b){return a.keys=b,a}function e(a){return a.sensitive?"":"i"}function f(a,b){var c=a.source.match(/\((?!\?)/g);if(c)for(var e=0;e<c.length;e++)b.push({name:e,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return d(a,b)}function g(a,b,c){for(var f=[],g=0;g<a.length;g++)f.push(j(a[g],b,c).source);var h=new RegExp("(?:"+f.join("|")+")",e(c));return d(h,b)}function h(b,c,e){for(var f=a(b),g=i(f,e),h=0;h<f.length;h++)"string"!=typeof f[h]&&c.push(f[h]);return d(g,c)}function i(a,c){c=c||{};for(var d=c.strict,f=c.end!==!1,g="",h=a[a.length-1],i="string"==typeof h&&/\/$/.test(h),j=0;j<a.length;j++){var k=a[j];if("string"==typeof k)g+=b(k);else{var l=b(k.prefix),m=k.pattern;k.repeat&&(m+="(?:"+l+m+")*"),m=k.optional?l?"(?:"+l+"("+m+"))?":"("+m+")?":l+"("+m+")",g+=m}}return d||(g=(i?g.slice(0,-2):g)+"(?:\\/(?=$))?"),g+=f?"$":d&&i?"":"(?=\\/|$)",new RegExp("^"+g,e(c))}function j(a,b,c){return b=b||[],isarray(b)?c||(c={}):(c=b,b=[]),a instanceof RegExp?f(a,b,c):isarray(a)?g(a,b,c):h(a,b,c)}window.pathToRegexp=j;var k=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g")}();var Wires=Wires||{};!function(){"use strict";Wires.Config={viewsFolder:"/app/views/"}}();var Wires=Wires||{};!function(){var a=Wires.Events={on:function(a,b,d){if(!c(this,"on",a,[b,d])||!b)return this;this._events||(this._events={});var e=this._events[a]||(this._events[a]=[]);return e.push({callback:b,context:d,ctx:d||this}),this},once:function(a,b,d){if(!c(this,"once",a,[b,d])||!b)return this;var e=this,f=_.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){if(!this._events||!c(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(var e=a?[a]:_.keys(this._events),f=0,g=e.length;g>f;f++){a=e[f];var h=this._events[a];if(h)if(b||d){for(var i=[],j=0,k=h.length;k>j;j++){var l=h[j];(b&&b!==l.callback&&b!==l.callback._callback||d&&d!==l.context)&&i.push(l)}i.length?this._events[a]=i:delete this._events[a]}else delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=arguments;if(!c(this,"trigger",a,b))return this;var e=this._events[a],f=this._events.all;return e&&d(e,b),f&&d(f,arguments),this},stopListening:function(a,b,c){var d=this._listeningTo;if(!d)return this;var e=!b&&!c;c||"object"!=typeof b||(c=this),a&&((d={})[a._listenId]=a);for(var f in d)a=d[f],a.off(b,c,this),(e||_.isEmpty(a._events))&&delete this._listeningTo[f];return this}},b=/\s+/,c=function(a,c,d,e){if(!d)return!0;if("object"==typeof d){for(var f in d)a[c].apply(a,[f,d[f]].concat(e));return!1}if(b.test(d)){for(var g=d.split(b),h=0,i=g.length;i>h;h++)a[c].apply(a,[g[h]].concat(e));return!1}return!0},d=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},e={listenTo:"on",listenToOnce:"once"};_.each(e,function(b,c){a[c]=function(a,c,d){var e=this._listeningTo||(this._listeningTo={}),f=a._listenId||(a._listenId=_.uniqueId("l"));return e[f]=a,d||"object"!=typeof c||(d=this),a[b](c,d,this),this}}),a.bind=a.on,a.unbind=a.off}();var Wires=Wires||{};!function(){var a=function(a,b){var c,d=this;c=a&&_.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},_.extend(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&_.extend(c.prototype,a),c.__super__=d.prototype,c.prototype.__parent__=function(a,b){c.__super__[a].apply(c.prototype,b)},c},b=function(a,b){if(this.initialize){var c=this;this._delayedInitialization?this._delayedInitialization(function(){c.__initializationResolved||(c.initialize.apply(c,arguments),c.__initializationResolved=!0)}):this.initialize.apply(this,arguments)}};b.extend=a,_.extend(b.prototype,Wires.Events),Wires.Class=b}();var Wires=Wires||{};!function(){"use strict";Wires.Form=Wires.Class.extend({initialize:function(a){var b=this;_.each(a,function(a,c){b[c]=a})},reset:function(){var a=this;_.each(this,function(b,c){a.hasOwnProperty(c)&&0!==!c.indexOf("_")&&(a[c]=null)})},getValues:function(){var a={},b=this;return _.each(this,function(c,d){b.hasOwnProperty(d)&&0!==!d.indexOf("_")&&(a[d]=c)}),a}})}(),Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(a,b){var c=this[a],d=c,e=function(){return d},f=function(e){return c=d,d=b.call(this,a,c,e)};delete this[a]&&Object.defineProperty(this,a,{get:e,set:f,enumerable:!0,configurable:!0})}}),id_counter=1,Object.defineProperty(Object.prototype,"__uniqueId",{writable:!0}),Object.defineProperty(Object.prototype,"uniqueId",{get:function(){return void 0==this.__uniqueId&&(this.__uniqueId=id_counter++),this.__uniqueId}}),Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(a){var b=this[a];delete this[a],this[a]=b}}),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),function(){var a={};domain.register("$root",function(){return a})}();var Wires=Wires||{};!function(){"use strict";Wires.Node=Wires.Class.extend({bindEssentials:function(a){var b=this;this.variables=Wires.Variable.extract(this.scope,a),this.template=a,this.variables.length>0?_.each(this.variables,function(a){Wires.Watcher.spy(b.scope,a,b)}):this.setValue()},compileValue:function(a,b){var c=this.template,d={};return _.each(this.variables,function(e){var f=e.getValue(a,b);void 0!==b&&(f=e.equalsTo(a)?b:f),void 0!==f&&(d[e.tag]=f,c=c.split(e.name).join(void 0!==f&&null!==f?f.toString():""))}),c}})}();var Wires=Wires||{};!function(){"use strict";Wires.Attr=Wires.Node.extend({initialize:function(a,b,c,d){this.instance=a.instance,this.scope=a,this.element=c,this.attr=d,this.bindEssentials(this.attr.value)},setValue:function(a,b){var c=this.compileValue(a,b);this.attr.value=c},executeStatement:function(a,b,c){return Wires.Exec.expression({statement:this.attr.value,incomingVar:a,resultNeeded:c,newValue:b,scope:this.scope,variables:this.variables})}},{claimsChildren:!1,addAttibute:!0})}();var Wires=Wires||{};!function(){"use strict";Wires.TextNode=Wires.Node.extend({initialize:function(a,b,c,d){this.dom=b,this.scope=a,this.instance=a.instance,this.element=document.createTextNode(this.dom.data),this.dom.persists&&(this.element.__persists=!0),this.bindEssentials(b.data);var e=this;c.appendChild(e.element),b.children&&Wires.World.parse(a,b.children,this.element)},setValue:function(a,b){var b=this.compileValue(a,b);this.element.nodeValue=b},getElement:function(){var a=this;return new Promise(function(b,c){return b(a.element)})}})}();var Wires=Wires||{};Wires.StoredComponents={},function(){"use strict";Wires.TagNode=Wires.Node.extend({initialize:function(a,b,c,d){this.dom=b,this.scope=a,this.instance=a.instance,this.attributes={},this.target=c,this.options=d,this.persistComponentsDom=!1},prepareNodeStructure:function(a){var b=this,c=this.getElement(a);b.element=c;var d="components."+b.dom.name;if(domain.isServiceRegistered(d)){var e={};_.each(b.dom.attribs,function(a,c){var d=Wires.Exec.expression({statement:a,scope:b.scope,variables:Wires.Variable.extract(b.scope,a)});e[c]=d}),domain.require(["$load"],function(a){a.controller(d,{target:c,args:[e]}).then(function(){})})}},create:function(a){var b=this.options,c=this.target,d=this.dom,e=this;$(this.element).data("wires-node",this),this.prepareNodeStructure(function(){b&&b.insertBefore?($(this.element).insertBefore(b.insertBefore),Wires.World.parse(e.scope,d.children,this.element)):(this.shouldAppendElement||(this.attributeClamsChildren=!0),d.children&&!this.attributeClamsChildren&&Wires.World.parse(e.scope,d.children,this.element),this.shouldAppendElement?c.appendChild(this.element):this.placeholders=!0),this.placeholders&&(this.placeholderBefore=document.createComment(""),c.appendChild(this.placeholderBefore),this.placeholderAfter=document.createComment(""),c.appendChild(this.placeholderAfter)),_.each(this.attributes,function(a){a.onElementReady&&a.onElementReady(e)}),a()}.bind(this))},bindAttribute:function(a,b){new Wires.Attr(this.scope,this.dom,b,a)},getElement:function(a){var b=document.createElement(this.dom.name),c=this;this.shouldAppendElement=!0;var d=!1,e=[];return this.dom.persists&&(b.__persists=!0),domain.each(this.dom.attribs,function(a,f){if(d)return!1;var g=document.createAttribute(f);g.value=a;var h=!0,i="attributes."+f;return domain.isServiceRegistered(i)?domain.require([i],function(a){e.push({handler:a,attr:g}),a.claimsChildren===!0&&(c.attributeClamsChildren=!0),a.placeholders&&(c.placeholders=!0),void 0!==a.shouldAppendElement&&(c.shouldAppendElement=a.shouldAppendElement),void 0!==a.ignoreRestAttributes&&(d=a.ignoreRestAttributes),h=a.addAttibute}):(a.indexOf("$")>-1&&c.bindAttribute(g,b),void(h&&b.setAttributeNode(g)))}).then(function(){return _.each(e,function(a){var d=new a.handler(c.scope,c.dom,b,a.attr,c);void 0!==a.handler.persistWatch&&(d.persistWatch=a.handler.persistWatch),c.attributes[a.attr.nodeName]=d}),a(),b}),b}})}();var Wires=Wires||{};!function(){"use strict";Wires.World=Wires.Class.extend({initialize:function(a){this.template=a.template,this.target=a.target,this.scope=a.scope,this.done=a.done;var b=this;if(a.dom)Wires.World.parse(b.scope,a.dom,b.target),a.done&&a.done();else{var c=new Tautologistics.NodeHtmlParser.DefaultHandler(function(c,d){c?console.log(c):(Wires.World.parse(b.scope,d,b.target),a.done&&a.done())}),d=new Tautologistics.NodeHtmlParser.Parser(c);d.parseComplete(this.template)}}},{cleanUp:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},attachParents:function(a,b,c){var d=a.instance,e={instance:b,parents:[d],parent:a.instance,param:c};return void 0!==c&&(e.instance={},e.instance[c]=b),a.parents&&(e.parents=_.union(e.parents,a.parents)),e},parse:function(a,b,c,d){var e;return _.each(b,function(b){"text"===b.type&&(e=new Wires.TextNode(a,b,c,d)),"tag"===b.type&&(e=new Wires.TagNode(a,b,c,d),e.create(function(){}))}),e}})}();var Wires=Wires||{};!function(){"use strict";Wires.Exec=Wires.Class.extend({},{expression:function(options){var statement=options.statement,incomingVar=options.incomingVar,resultNeeded=void 0!==options.resultNeeded?options.resultNeeded:!0,newValue=options.newValue,scope=options.scope,variables=options.variables,data={};_.each(variables,function(a){var b=a.getValue?a.getValue():a;void 0===newValue||a.service||(b=a.equalsTo(incomingVar)?newValue:b);var c=a.name.replace(/[\[.\]]/gi,"_");data[c]=b,statement=statement.split(a.name).join(c)});var func="(function("+_.keys(data)+"){ "+(resultNeeded?"return":"")+" "+statement+"})",result="",_this=this.getThisPointer(scope);try{result=eval(func).apply(_this,_.values(data))}catch(e){this.failedMessage(e,{message:"Failed to execute expression",code:statement,scope:scope,variables:data,func:func})}return result},variable:function(param){return eval("(function(){return this."+param+"})")},getThisPointer:function(a){var b=a.instance;return(a.parent||a.parents)&&(b=a.instance,b.parent=a.parent,b.parents=a.parents),b},failedMessage:function(a,b){console.groupCollapsed(b.message,b.param||""),console.error(a.message),console.error(a.stack?a.stack:a),b.code&&console.error(b.code),b.variables&&console.error("Local variables",b.variables),b.target&&(console.error("Destination instance:",b.target||{}),console.error("Destination property:",b.target.property||{})),console.error("Registered scope:",b.scope||{}),b.scope&&b.scope.parent&&console.info("Maybe you meant $parent?"),console.groupEnd()}})}();var Wires=Wires||{};!function(){"use strict";var a=function(a,b){var c=new RegExp(/^(parent\.|parents\[(\d{1,4})\]\.)/m),d=a.match(c),e=b.instance;if(d){var f;(f=parseInt(d[2]))>0?b.parent&&b.parents.length>=f&&(e=b.parents[f]):e=b.parent,a=a.replace(c,"")}return{instance:e,path:a}},b=function(b,c){var d=a(c,b),e=d.instance,f=d.path,c=f.split(".");if(1===c.length)return{instance:e,property:c[0]};var g=e,h=null;return _.each(c,function(a,b){void 0!==g[a]&&b<c.length-1&&(g=g[a]),b===c.length-1&&(h=a)}),{instance:g,property:h}};Wires.Variable=Wires.Class.extend({initialize:function(a,c,d){return this.instance=a.instance,this.parent=a.parent,this.scope=a,this.isFunction=!1,this.name=c,d?(this.expression=c.replace("{#","").replace("#}",""),void(this.expressionVariables=d.variables)):(this.param=c.substring(1),c.indexOf("(")>-1&&(this.isFunction=!0),this.target=b(this.scope,this.param),void this.compileFunction())},compileFunction:function(){this.compiledFunction=Wires.Exec.variable(this.param)},equalsTo:function(a){return this.target&&a.target&&this.target.instance.uniqueId==a.target.instance.uniqueId&&this.target.param==a.target.param?!0:a.name===this.name},_executeFunction:function(){var a=this.compiledFunction,b=Wires.Exec.getThisPointer(this.scope),c="";try{c=a.apply(b)}catch(d){Wires.Exec.failedMessage(d,{message:"Failed to execute",param:this.expression?this.expression:this.param,target:this.target,scope:this.scope})}return c},getTrickedValue:function(){var a=this.getValue();return Wires.VariableTricks.changeWatchableTarget(a)},getValue:function(a,b){return this.expression?Wires.Exec.expression({statement:this.expression,incomingVar:a,newValue:b,scope:this.scope,variables:this.expressionVariables}):_.isObject(this.target.instance)?this.isFunction||void 0===this.target.instance[this.target.property]?this.isFunction?this._executeFunction():"":this._executeFunction():this.target.instance},setValue:function(a){this.target.instance[this.target.property]=a}},{getTargetVariable:b,extract:function(a,b){var c=b.match(/(\$[a-zA-Z0-9_.\[\]]+(\([$\w,\s'".]*\))?)/g),d=[];c&&(c=_.uniq(c),_.each(c,function(b){d.push(new Wires.Variable(a,b))}));var e=[];c=b.match(/(\{#(.+?)#\})/g),c&&(c=_.uniq(c),_.each(c,function(b){e.push(new Wires.Variable(a,b,{variables:d}))}));var f=[];return _.each(e,function(a){f.push(a)}),_.each(d,function(a){f.push(a)}),f}})}();var Wires=Wires||{};!function(){"use strict";Wires.Watcher=Wires.Class.extend({initialize:function(a,b,c){if(this.nodeCollection={},this.index=1,this.node=a,this.variable=b,this.instanceId=c,!this.variable.isFunction&&!this.variable.expression){var d=b.target.instance,e=b.target.property;d.watch(e,function(a,b,c){this.valueChanged(c),d.onPropertyChanged&&_.defer(function(){d.onPropertyChanged(a,c)});var e="on"+a.charAt(0).toUpperCase()+a.slice(1)+"Changed";return d[e]&&_.defer(function(){d[e](c)}),c}.bind(this))}},valueChanged:function(a){var b=this;_.each(this.nodeCollection,function(c){c.setValue(b.variable,a)})},setInitial:function(a){a.setValue(this.variable,void 0,!0)},add:function(a){var b=this,c=this.index++,d=(a.element,this.node instanceof Wires.TextNode?a.element.parentNode||a.element:a.element);void 0===d.__persists&&d.addEventListener("DOMNodeRemovedFromDocument",function(){var a=b.nodeCollection[this.index];(void 0!==a||a&&!a.persistWatch)&&delete b.nodeCollection[this.index]}.bind({index:c,node:a}),!1),this.nodeCollection[c]=a}},{collections:{},unwatch:function(a,b,c){console.log("unwatch",b,c.element)},spy:function(a,b,c){var d=a.instance,e=b.name;if(!b.expression){var e=b.target&&b.target.property?b.target.property:b.name;d=b.target&&b.target.instance?b.target.instance:d;var f=d.uniqueId;if(!this.collections[d.uniqueId]){var g=new Wires.Watcher(c,b);this.collections[f]=g}this.collections[f][e]||(this.collections[f][e]=new Wires.Watcher(c,b,f));var h=this.collections[f][e];h.add(c),h.setInitial(c)}}})}();var Wires=Wires||{};Wires.attrs=Wires.attrs||{},function(){"use strict";Wires.BaseAttribute=Wires.Attr.extend({initialize:function(a,b,c,d,e){this.scope=a,this.node=e,this.instance=a.instance,this.element=c,this.attr=d,this.condition=this.attr.value,this.bindEssentials(this.condition)}},{addAttibute:!1})}();var Wires=Wires||{};!function(){"use strict";Wires.VariableTricks=Wires.Class.extend({},{changeWatchableTarget:function(a){return a}})}(),function(){domain.service("$load",["$http","$queryString","$waitForSelector","$root"],function(a,b,c,d){return{component:function(a,b){},controller:function(e,f){var f=(window.location.url,f||{}),g=f.parent,h=b();f.params&&(h=_.merge(h,f.params));var i={$params:{target:h}};return f.injections&&_.each(f.injections,function(a,b){i[b]={target:a}}),domain.require([e],i,function(b){if(_.isArray(b)&&!(b.length<2)){var e=b[0].match(/^([^\s]+)(\s*->\s*([^\s]+))?/i),h=b[1];if(e){var i=e[1],j=e[3]||"section";return new Promise(function(a,b){return f.target?a(f.target):g&&g.target?c($(g.target)[0],j).then(a):void c(null,j).then(a)}).then(function(b){return Wires.World.cleanUp($(b)[0]),a.getTemplate(i).then(function(a){var c,e=[1];if(f.args){e=_.union(e,f.args);var g=h.bind.apply(h,e);c=new g}else c=new h;return c.root=d,new Promise(function(d,e){var f={scope:{instance:c},target:b,done:function(){return d({wires:g,target:b,ctrl:c})}};_.isPlainObject(a)?(a.dom&&(f.dom=a.dom),a.html&&(f.template=a.html)):f.template=a;var g=new Wires.World(f)})})})}}})}}})}(),domain.service("$queryString",function(){var a=function(){for(var a={},b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if("undefined"==typeof a[e[0]])a[e[0]]=decodeURIComponent(e[1]);else if("string"==typeof a[e[0]]){var f=[a[e[0]],decodeURIComponent(e[1])];a[e[0]]=f}else a[e[0]].push(decodeURIComponent(e[1]))}return a};return a}),function(){var a;domain.service("$history",function(){
if(a)return a;var b=Wires.Class.extend({initialize:function(){var a=this;window.onpopstate=function(){a.trigger("change")}},go:function(a){var b={url:a};history.pushState(b,a,a),this.trigger("change")}});return a=new b})}(),function(){var a={};domain.register("$http",function(){return{_request:function(a,b,c,d,e){var f={url:b,contentType:"application/json; charset=UTF-8",method:a,data:JSON.stringify(c),dataType:"json"};"GET"===a&&(f.data=c);var g=$.ajax(f);g.always(function(a,b){"success"===b?d(a):a.responseJSON&&a.responseJSON&&e(a.responseJSON)})},"delete":function(a,b){var c=this;return new Promise(function(d,e){c._request("DELETE",a,b,function(a){d(a)},function(a){e(a)})})},getTemplate:function(b,c){return new Promise(function(d,e){if(domain.isServiceRegistered("$wiresViewsCache"))domain.require(["$wiresViewsCache"],function(a){return a[b]?d({dom:a[b]}):void 0})["catch"](e);else{if(a[b])return d(a[b]);$.get(b,c,function(c){a[b]=c,d(c)})}})},get:function(a,b){var c=this;return new Promise(function(d,e){c._request("GET",a,b,function(a){d(a)},function(a){e(a)})})},post:function(a,b){var c=this;return new Promise(function(d,e){c._request("POST",a,b,function(a){d(a)},function(a){e(a)})})},put:function(a,b){var c=this;return new Promise(function(d,e){c._request("PUT",a,b,function(a){d(a)},function(a){e(a)})})}}})}(),function(){domain.service("$array",["$http"],function(a){return function(){var b=[];return b.fetch=function(c,d){return a.get(c,d).then(function(a){b.splice(0,b.length),_.isArray(a)&&_.each(a,function(a){a.remove=function(){var a=b.indexOf(this);b.splice(a,1)},b.push(a)})})},b}})}(),domain.service("$waitForSelector",function(){return function(a,b){return new Promise(function(c,d){var e;if(e=document.querySelector(b))return c(e);var f,g,h;"."===b[0]?f=b.slice(1,b.length):"#"===b[0]?h=b.slice(1,b.length):g=b,console.info("Waiting for ",b,"to added to DOM...");var i=new MutationObserver(function(a){a.forEach(function(a){_.each(a.addedNodes,function(a){return f&&$(a).hasClass(f)?(i.disconnect(),c(a)):h&&$(a).attr("id")===h?(i.disconnect(),c(a)):g&&a.nodeName.toLowerCase()===g?(i.disconnect(),c(a)):void 0})})});i.observe(a||document.body,{childList:!0,subtree:!0})})}}),domain.service("attributes.ws-href",["$history"],function(a){return Wires.BaseAttribute.extend({setValue:function(b,c){var d=this.compileValue(b,c),e=this;$(e.element).attr("href",d),$(e.element).click(function(b){b.preventDefault(),a.go(d)})}})}),function(){var a=Wires.Class.extend({initialize:function(){this.states=[],this.loaded=!1},set:function(a,b,c){this.route=a,this.controller=b,this.states=c},getControllerPath:function(){return"controllers."+this.controller},matches:function(){var a,b=window.location.pathname,c=[],d=pathToRegexp(this.route,c),e={};return(a=d.exec(b))?(_.each(c,function(b,c){e[b.name]=a[c+1]}),e):void 0}}),b=new a;domain.register("$router",["$http","$queryString","$load","$history"],function(c,d,e,f){return{add:function(){var a=this.state.apply(this,arguments);b.states.push(a)},state:function(b,c,d){var e=new a;return e.set.apply(e,arguments),e},_start:function(a){var b=this;_.each(a.states,function(a){var c;return(c=a.matches())?(b.stack.push(a),a.states&&b._start(a),!1):void 0})},loadStates:function(a){var b,c=(new Date).getTime(),d=this;d.historyStack=d.historyStack||[],domain.each(a,function(c,f){var g=d.historyStack[f],h=f+1===a.length;return!g||h||g.route!==c.route?e.controller(c.getControllerPath(),{parent:b}).then(function(a){c.loaded=!0,b=a}):void 0}).then(function(){d.historyStack=[],_.each(d.stack,function(a){d.historyStack.push(a)}),d.stack=[],console.log("Loaded in "+((new Date).getTime()-c),"ms")})},start:function(){var a=this;a.stack=[],a._start(b),a.loadStates(a.stack),f.on("change",function(c){a.stack=[],a._start(b),a.loadStates(a.stack)})}}})}(),domain.service("attributes.ws-if",function(){return WiresIF=Wires.BaseAttribute.extend({initialize:function(){WiresIF.__super__.initialize.apply(this,arguments)},onElementReady:function(){this.node.placeholderBefore.nodeValue="wires-if: "+this.condition,this.node.placeholderAfter.nodeValue="/wires-if: "+this.condition},setValue:function(a,b){var c=this.executeStatement(a,b,"return"),d=$(this.element);c?(d.insertBefore(this.node.placeholderAfter),Wires.World.parse(this.scope,this.node.dom.children,this.element)):d.remove()}},{persistWatch:!0,shouldAppendElement:!1,claimsChildren:!1})}),domain.service("attributes.ws-visible",function(){return Wires.BaseAttribute.extend({setValue:function(a,b){var c=this.executeStatement(a,b,"return"),d=$(this.element).data("animation"),e=$(this.element);switch(d){case"slide":c?e.slideDown():e.slideUp();break;case"fade":c?e.fadeIn():e.fadeOut();break;default:c?e.show():e.hide()}}})}),domain.service("attributes.ws-repeat",function(){return Wires.Attr.extend({initialize:function(a,b,c,d,e){this.instance=a.instance,this.scope=a,this.element=c,this.attr=d,this.node=e,this.dom=b,this.condition=this.attr.value,this.essentials=this.getEssentials();this.essentials.collection.getTrickedValue()._WiresEach;this.bindArrayEvents(!1),this.items=[],Wires.Watcher.spy(this.instance,this.essentials.collection,this)},onElementReady:function(){this.node.placeholderBefore.nodeValue="ws-repeat: "+this.condition,this.node.placeholderAfter.nodeValue="/ws-repeat: "+this.condition,this.delayedAddFunction&&(this.delayedAddFunction(),this.delayedAddFunction=void 0)},addItem:function(a,b){a[this.essentials.key.param]=function(){return this.array.indexOf(this.item)}.bind({array:this.array,item:a}),a.parent=this.instance;var c=this,d=_.cloneDeep(this.dom);delete d.attribs["ws-repeat"];var e=[d],f=Wires.World.attachParents(this.scope,a,c.essentials.value.param),g=Wires.World.parse(f,e,this.element,{insertBefore:this.node.placeholderAfter});c.items.push(g)},bindArrayEvents:function(a){var b=this.essentials.collection;this.array=b.getTrickedValue(),a&&(this.array._WiresEach=null),_.isArray(this.array)&&(this.array._WiresEach||(this.array.clean=function(){this.splice(0,this.length)},this.array.remove=function(){this.splice(0,this.length)},this.array._WiresEach=[],this.array._WiresRepeat=this,this.array.add=function(){this.push.apply(this,arguments)},this.array.push=function(){var a=arguments.length>0?arguments[0]:null,b=Array.prototype.push.apply(this,arguments);if(a){var c=this;a.remove=function(){var a=c.indexOf(this);c.splice(a,1)},_.each(this._WiresEach,function(b){b.addItem(a)})}return b},this.array.splice=function(a,b){return _.each(this._WiresEach,function(c){for(var d=a;a+b>d;d++)console.log(c.items[d]),$(c.items[d].element).remove();c.items.splice(a,b)}),Array.prototype.splice.apply(this,arguments)}),this.array._WiresEach.push(this))},getArrayLength:function(){return this.array.length},getEssentials:function(){var a=Wires.Variable.extract(this.scope,this.condition);return a.length<2?void console.error("Can't recognize expression!"):{value:a[0],key:3===a.length?a[1]:{name:"$index",param:"index"},collection:a[3===a.length?2:1]}},_setValue:function(a,b){var c=this,d=b?b:a.getTrickedValue();_.isArray(d)&&c.dom.children&&_.each(d,function(a,b){c.addItem(a,b)})},removeElements:function(){for(var a=[],b=$(this.node.placeholderBefore);void 0!=b[0]&&b[0]!=this.node.placeholderAfter;)b=b.next(),a.push(b);_.each(a,function(a){a.remove()})},setValue:function(a,b,c){c?this.delayedAddFunction=function(){this._this._setValue.apply(this._this,this.args)}.bind({_this:this,args:arguments}):this._setValue.apply(this,arguments)}},{addAttibute:!1,ignoreRestAttributes:!0,shouldAppendElement:!1})}),domain.service("attributes.ws-value",function(){var a=Wires.Attr.extend({initialize:function(b,c,d,e){a.__super__.initialize.apply(this,arguments),this.element=d,this.scope=b,this.instance=b.instance,this.bindChanges()},bindChanges:function(){var a=this,b=this.element.nodeName.toLowerCase(),c=$(this.element).attr("type");switch("textarea"===b&&(c=b),"select"===b&&(c=b),"input"!==b||c||(c="text"),c){case"text":case"email":case"password":case"textarea":this.element.addEventListener("keydown",function(b){clearInterval(a.interval),a.interval=setTimeout(function(){a.variables.length>0&&(a.ignoreNodeSetValue=!0,a.variables[0].setValue(this.value,{ignore:this.element}))}.bind(this),50)},!1);break;case"checkbox":this.element.addEventListener("click",function(b){var c=this.checked;a.ignoreNodeSetValue=!0,a.variables[0].setValue(c)});break;case"select":$(this.element).bind("change",function(){var b=$(this).val(),c=$(this).find("option:selected");if(c.length){var d=$(c).data("wires-node"),e=d.attributes["ws-value"];e&&e.variables.length>0&&(b=e.variables[0].getValue())}a.ignoreNodeSetValue=!0,a.variables[0].setValue(b)})}},setValue:function(a,b){if(this.ignoreNodeSetValue)return void(this.ignoreNodeSetValue=!1);var c=this.executeStatement(a,b,"return"),d=this.element.getAttribute("type");"checkbox"===d?this.element.checked=c:this.element.value=c}},{addAttibute:!1});return a}),domain.service("attributes.ws-click",function(){return Wires.Attr.extend({initialize:function(a,b,c,d){this.scope=a,this.element=c,this.attr=d,this.condition=this.attr.value,this.bindEssentials(this.condition);this.bindEvents()},bindEvents:function(){$(this.element).click(function(){this.executeStatement.bind(this)("","",!1)}.bind(this))},setValue:function(a,b){}},{addAttibute:!1})}),domain.service("attributes.ws-animation",function(){return Animation=Wires.BaseAttribute.extend({initialize:function(){Animation.__super__.initialize.apply(this,arguments);var a=this.attr.value;$(this.element).data("animation",a)},setValue:function(a,b){}})}),domain.service("attributes.ws-submit",function(){return WsSubmit=Wires.BaseAttribute.extend({initialize:function(){WsSubmit.__super__.initialize.apply(this,arguments),this.setBindings()},setBindings:function(){$(this.element).submit(function(a){$(this.element).find("select").each(function(){var a=$(this).data("wires-node").attributes,b=a["ws-value"];if(b&&b.variables.length){var c=b.variables[0].getValue();if(void 0===c||""===c){var d=$(this).find("option:selected");if(d.length){var e=$(d).data("wires-node"),f=e.attributes["ws-value"];if(f&&f.variables.length>0){var g=f.variables[0].getValue();b.variables[0].setValue(g)}}}}}),this.executeStatement(),a.originalEvent.preventDefault()}.bind(this))}})}),domain.service("attributes.ws-selected",function(){return WsSelected=Wires.BaseAttribute.extend({initialize:function(){WsSelected.__super__.initialize.apply(this,arguments)},setValue:function(a,b){var c=this.executeStatement(a,b,"return"),d=$(this.element);c?d.attr("selected",""):d.removeAttr("selected")}},{addAttibute:!1})}),domain.service("attributes.ws-class",function(){return Wires.BaseAttribute.extend({setValue:function(a,b){var c=this.executeStatement(a,b,"return"),d=this;_.each(c,function(a,b){a?$(d.element).addClass(b):$(d.element).removeClass(b)})}})}),domain.service("attributes.ws-sortable",function(){return WsSortable=Wires.BaseAttribute.extend({initialize:function(){WsSortable.__super__.initialize.apply(this,arguments),this.options=this.executeStatement(null,null,"return"),this.setBindings()},setBindings:function(){var a,b=this.options;$(this.element).sortable({axis:"y",start:function(b,c){a=c.item.position().top},update:function(a,c){var d=function(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)},e=c.item,f=(e.position().top,b.property),g=b.autoSave;if(f){var h=e.next(),i=e.prev(),j=c.item.data("wires-node"),k=0,l=1;if(i.length){var m=i.data("wires-node"),n=Wires.Variable.getTargetVariable(m.scope,f);k=n.instance[n.property]}if(h.length){var m=h.data("wires-node"),n=Wires.Variable.getTargetVariable(m.scope,f);l=n.instance[n.property]}else l=k+1;var o=(l-k)/2+k;o=d(o,5);var p=Wires.Variable.getTargetVariable(j.scope,f);p.instance[p.property]=o,g&&p.instance.save()}}})}})});var Wires=Wires||{};!function(){"use strict";Wires.DOM=Wires.Class.extend({},{components:{},storage:{},_obtain:function(a,b){var c=new Tautologistics.NodeHtmlParser.DefaultHandler(function(a,c){a?console.log(a):b(c)}),d=new Tautologistics.NodeHtmlParser.Parser(c);d.parseComplete(a)},getFromString:function(a,b,c){c?this.storage[c]?b(this.storage[c]):this._obtain(a,function(a){this.storage[c]=a,b(a)}):this._obtain(a,function(a){b(a)})}})}();