!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(){}var e=b.exports={};e.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(a){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(a){throw new Error("process.chdir is not supported")}},{}],2:[function(a,b,c){"use strict";function d(a){function b(a){return null===i?void k.push(a):void g(function(){var b=i?a.onFulfilled:a.onRejected;if(null===b)return void(i?a.resolve:a.reject)(j);var c;try{c=b(j)}catch(d){return void a.reject(d)}a.resolve(c)})}function c(a){try{if(a===l)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var b=a.then;if("function"==typeof b)return void f(b.bind(a),c,d)}i=!0,j=a,h()}catch(e){d(e)}}function d(a){i=!1,j=a,h()}function h(){for(var a=0,c=k.length;c>a;a++)b(k[a]);k=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");var i=null,j=null,k=[],l=this;this.then=function(a,c){return new l.constructor(function(d,f){b(new e(a,c,d,f))})},f(a,c,d)}function e(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function f(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var g=a("asap");b.exports=d},{asap:4}],3:[function(a,b,c){"use strict";function d(a){this.then=function(b){return"function"!=typeof b?this:new e(function(c,d){f(function(){try{c(b(a))}catch(e){d(e)}})})}}var e=a("./core.js"),f=a("asap");b.exports=e,d.prototype=e.prototype;var g=new d(!0),h=new d(!1),i=new d(null),j=new d(void 0),k=new d(0),l=new d("");e.resolve=function(a){if(a instanceof e)return a;if(null===a)return i;if(void 0===a)return j;if(a===!0)return g;if(a===!1)return h;if(0===a)return k;if(""===a)return l;if("object"==typeof a||"function"==typeof a)try{var b=a.then;if("function"==typeof b)return new e(b.bind(a))}catch(c){return new e(function(a,b){b(c)})}return new d(a)},e.all=function(a){var b=Array.prototype.slice.call(a);return new e(function(a,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}b[f]=g,0===--e&&a(b)}catch(i){c(i)}}if(0===b.length)return a([]);for(var e=b.length,f=0;f<b.length;f++)d(f,b[f])})},e.reject=function(a){return new e(function(b,c){c(a)})},e.race=function(a){return new e(function(b,c){a.forEach(function(a){e.resolve(a).then(b,c)})})},e.prototype["catch"]=function(a){return this.then(null,a)}},{"./core.js":2,asap:4}],4:[function(a,b,c){(function(a){function c(){for(;e.next;){e=e.next;var a=e.task;e.task=void 0;var b=e.domain;b&&(e.domain=void 0,b.enter());try{a()}catch(d){if(i)throw b&&b.exit(),setTimeout(c,0),b&&b.enter(),d;setTimeout(function(){throw d},0)}b&&b.exit()}g=!1}function d(b){f=f.next={task:b,domain:i&&a.domain,next:null},g||(g=!0,h())}var e={task:void 0,next:null},f=e,g=!1,h=void 0,i=!1;if("undefined"!=typeof a&&a.nextTick)i=!0,h=function(){a.nextTick(c)};else if("function"==typeof setImmediate)h="undefined"!=typeof window?setImmediate.bind(window,c):function(){setImmediate(c)};else if("undefined"!=typeof MessageChannel){var j=new MessageChannel;j.port1.onmessage=c,h=function(){j.port2.postMessage(0)}}else h=function(){setTimeout(c,0)};b.exports=d}).call(this,a("_process"))},{_process:1}],5:[function(a,b,c){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(a,b){var c=arguments.length?this.then.apply(this,arguments):this;c.then(null,function(a){setTimeout(function(){throw a},0)})})},{}],6:[function(a,b,c){a("asap");"undefined"==typeof Promise&&(Promise=a("./lib/core.js"),a("./lib/es6-extensions.js")),a("./polyfill-done.js")},{"./lib/core.js":2,"./lib/es6-extensions.js":3,"./polyfill-done.js":5,asap:4}]},{},[6]),function(a){function b(a){var b=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,c=/([^\s,]+)/g,d=a.toString().replace(b,""),e=d.slice(d.indexOf("(")+1,d.indexOf(")")).match(c);return null===e&&(e=[]),e}var c={};a.domain={constructModel:function(a,b,c){var d=new b;this.require({source:b.prototype.init,target:d.init,instance:d},a).then(function(a){c(null,d)})["catch"](function(a){c(a)})},getInputArguments:function(a){var b={};if(b.localServices={},a.length>0){if(b.source=a[0],b.target=a[0],_.isPlainObject(a[0])){var c=a[0];b.target=c.target,b.source=c.source,b.instance=c.instance}if(a.length>1){var d=_.isString(a[0])||_.isArray(a[0]);d?(_.isArray(a[0])?b.source=a[0]:b.source=_.isString(a[0])?[a[0]]:a[0],_.isFunction(a[1])&&(b.target=a[1]),_.isFunction(a[2])&&(b.target=a[2])):(_.isFunction(a[1])&&(b.callReady=a[1]),_.isPlainObject(a[1])&&(b.localServices=a[1]))}3===a.length&&(_.isPlainObject(a[1])&&(b.localServices=a[1]),_.isFunction(a[2])&&(b.callReady=a[2]))}return b.target=b.target||function(){},b.source=b.source?b.source:b.target,b.callReady=b.callReady||function(){},b},service:function(){this.register.apply(this,arguments)},register:function(a,b,d){var e=null,f=b;_.isArray(b)&&(e=b,f=d),c[a]={target:f,args:e}},requirePackage:function(a){var b={};return this.each(c,function(c,d){var e=d.split(".")[0];return e===a?domain.require([d],function(a){b[d]=a}):void 0}).then(function(){return b})},require:function(){var a=this.getInputArguments(arguments),d=this,e=a.localServices,f=_.isArray(a.source)?a.source:b(a.source),g=a.target,h=(a.callReady,a.instance),i=c,d=this,j=new Promise(function(b,c){var j=[],k=_.merge(e,i);for(var l in f){var m=(f[l],f[l]);if(!k[m])return console.error("Error while injecting variable '"+m+"' into function \n"+a.source.toString()),c({status:500,message:"Service with name '"+m+"' was not found "});j.push(k[m])}return d.each(j,function(a){var b=a.target,c=a.args;if(_.isFunction(b)){var f=[];return f=c?[c,e,b]:[b,e],d.require.apply(d,f)}return b}).then(function(a){return delete d,g.apply(h||a,a)}).then(b)["catch"](c)});return j},isServiceRegistered:function(a){return void 0!==c[a]},each:function(a,b){return new Promise(function(c,d){var e=[],f=_.isPlainObject(a),g=-1,h=function(){if(g++,!(g<_.size(a)))return c(e);var i,j;f?(i=_.keys(a)[g],j=a[i]):(i=g,j=a[g]);var k=b.call(b,j,i);k instanceof Promise?k.then(function(a){e.push(a),h()})["catch"](d):(e.push(k),h())};h()})}}}(window);